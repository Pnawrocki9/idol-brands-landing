<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Success Stories Toggle</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-3xl font-bold mb-6">üß™ Test ukrywania Success Stories</h1>
        
        <!-- Status Section -->
        <div class="mb-6 p-4 bg-blue-50 rounded-lg">
            <h2 class="text-xl font-semibold mb-3">Status localStorage:</h2>
            <div class="space-y-2">
                <p><strong>showSuccessStories:</strong> <span id="status-value" class="font-mono bg-gray-200 px-2 py-1 rounded"></span></p>
                <p><strong>Success Stories powinny byƒá:</strong> <span id="status-text" class="font-bold"></span></p>
            </div>
        </div>

        <!-- Control Panel -->
        <div class="mb-6 p-4 bg-green-50 rounded-lg">
            <h2 class="text-xl font-semibold mb-3">Panel sterowania (test):</h2>
            <div class="flex gap-4">
                <button onclick="hideSuccessStories()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
                    ‚ùå Ukryj Success Stories
                </button>
                <button onclick="showSuccessStories()" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                    ‚úÖ Poka≈º Success Stories
                </button>
                <button onclick="location.reload()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                    üîÑ Od≈õwie≈º stronƒô
                </button>
            </div>
        </div>

        <!-- Test Links Section -->
        <div class="mb-6 p-4 bg-yellow-50 rounded-lg">
            <h2 class="text-xl font-semibold mb-3">Testowe linki Success Stories:</h2>
            <p class="text-sm text-gray-600 mb-4">Poni≈ºsze linki powinny siƒô ukrywaƒá/pokazywaƒá tak jak na prawdziwych stronach</p>
            
            <!-- Desktop Navigation (symulacja) -->
            <div class="mb-4">
                <h3 class="font-semibold mb-2">Menu Desktop:</h3>
                <nav class="flex gap-4 p-3 bg-white border rounded">
                    <a href="about.html" class="text-black hover:text-gray-600">About</a>
                    <a href="success-stories.html" class="text-black hover:text-gray-600">Success Stories (EN)</a>
                    <a href="success-stories-pl.html" class="text-black hover:text-gray-600">Historie sukcesu (PL)</a>
                    <a href="blog.html" class="text-black hover:text-gray-600">Blog</a>
                </nav>
            </div>

            <!-- Footer (symulacja) -->
            <div class="mb-4">
                <h3 class="font-semibold mb-2">Stopka (z elementami &lt;li&gt;):</h3>
                <ul class="list-disc list-inside p-3 bg-white border rounded">
                    <li><a href="about.html" class="hover:underline">About</a></li>
                    <li><a href="success-stories.html" class="hover:underline">Success Stories (EN)</a></li>
                    <li><a href="success-stories-pl.html" class="hover:underline">Historie sukcesu (PL)</a></li>
                    <li><a href="blog.html" class="hover:underline">Blog</a></li>
                </ul>
            </div>
        </div>

        <!-- Found Links Debug -->
        <div class="mb-6 p-4 bg-purple-50 rounded-lg">
            <h2 class="text-xl font-semibold mb-3">üîç Debug - znalezione linki:</h2>
            <div id="debug-output" class="bg-white p-3 rounded border font-mono text-sm"></div>
        </div>

        <!-- Instructions -->
        <div class="p-4 bg-gray-50 rounded-lg">
            <h2 class="text-xl font-semibold mb-3">üìã Instrukcja:</h2>
            <ol class="list-decimal list-inside space-y-2">
                <li>Kliknij "Ukryj Success Stories" - linki powinny zniknƒÖƒá NATYCHMIAST (bez od≈õwie≈ºania)</li>
                <li>Kliknij "Poka≈º Success Stories" - linki powinny siƒô pojawiƒá NATYCHMIAST</li>
                <li>Kliknij "Od≈õwie≈º stronƒô" - stan powinien byƒá zachowany (linki nadal ukryte/widoczne)</li>
                <li>Sprawd≈∫ "Debug - znalezione linki" aby zobaczyƒá ile link√≥w zosta≈Ço znalezionych</li>
            </ol>
            <p class="mt-4 text-sm text-gray-600">
                <strong>Uwaga:</strong> Ta strona u≈ºywa dok≈Çadnie tej samej funkcji <code>updateSuccessStoriesVisibility()</code> 
                co prawdziwe strony w <code>/landing/</code>
            </p>
        </div>

        <!-- Quick Links -->
        <div class="mt-6 p-4 bg-indigo-50 rounded-lg">
            <h2 class="text-xl font-semibold mb-3">üîó Szybkie linki do testowania:</h2>
            <div class="space-y-2">
                <a href="landing/admin.html" class="block text-blue-600 hover:underline">‚Üí Otw√≥rz panel CMS (zmie≈Ñ ustawienie)</a>
                <a href="landing/index.html" target="_blank" class="block text-blue-600 hover:underline">‚Üí Strona angielska (index.html)</a>
                <a href="landing/index-pl.html" target="_blank" class="block text-blue-600 hover:underline">‚Üí Strona polska (index-pl.html)</a>
            </div>
        </div>
    </div>

    <!-- Load the same auth.js that real pages use -->
    <script src="landing/auth.js"></script>

    <script>
        // Additional test functions
        function hideSuccessStories() {
            localStorage.setItem('showSuccessStories', 'false');
            updateStatus();
            updateSuccessStoriesVisibility();
            updateDebug();
        }

        function showSuccessStories() {
            localStorage.setItem('showSuccessStories', 'true');
            updateStatus();
            updateSuccessStoriesVisibility();
            updateDebug();
        }

        function updateStatus() {
            const value = localStorage.getItem('showSuccessStories');
            const isVisible = value !== 'false';
            
            document.getElementById('status-value').textContent = value || '(nie ustawione - domy≈õlnie true)';
            document.getElementById('status-text').textContent = isVisible ? '‚úÖ WIDOCZNE' : '‚ùå UKRYTE';
            document.getElementById('status-text').className = isVisible ? 'font-bold text-green-600' : 'font-bold text-red-600';
        }

        function updateDebug() {
            const allLinks = document.querySelectorAll('a[href*="success-stories"]');
            const debugOutput = document.getElementById('debug-output');
            
            let html = `<p class="mb-2"><strong>Znaleziono ${allLinks.length} link√≥w zawierajƒÖcych "success-stories":</strong></p>`;
            html += '<ul class="list-disc list-inside space-y-1">';
            
            allLinks.forEach((link, index) => {
                const parentLi = link.closest('li');
                const elementToHide = parentLi || link;
                const isHidden = elementToHide.style.display === 'none';
                const status = isHidden ? '‚ùå UKRYTY' : '‚úÖ WIDOCZNY';
                
                html += `<li>
                    ${status} - "${link.textContent.trim()}" 
                    (href: ${link.getAttribute('href')})
                    ${parentLi ? '[w &lt;li&gt;]' : '[samodzielny]'}
                </li>`;
            });
            
            html += '</ul>';
            debugOutput.innerHTML = html;
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateStatus();
            updateDebug();
            
            // Show a message after updateNav runs
            setTimeout(() => {
                console.log('‚úÖ Funkcja updateSuccessStoriesVisibility() zosta≈Ça wykonana przez auth.js');
                console.log('Warto≈õƒá showSuccessStories:', localStorage.getItem('showSuccessStories'));
            }, 100);
        });
    </script>
</body>
</html>
