<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard â€“ Idol Brands</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Authentication helper provides isLoggedIn, isAdmin and navigation toggling -->
    <script src="auth.js"></script>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Navigation: reuse same structure as other pages.  updateNav() will show/hide links appropriately. -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="index.html" class="text-2xl font-display font-bold text-black">Idol Brands</a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-black hover:text-gray-600 transition-colors font-medium">Home</a>
                    <a href="about.html" class="text-black hover:text-gray-600 transition-colors font-medium">About</a>
                    <a href="how-it-works.html" class="text-black hover:text-gray-600 transition-colors font-medium">How It Works</a>
                    <a href="success-stories.html" class="text-black hover:text-gray-600 transition-colors font-medium">Success Stories</a>
                    <a href="blog.html" class="text-black hover:text-gray-600 transition-colors font-medium">Blog</a>
                    <a href="index.html#calculator-section" id="nav-calculator" class="text-black hover:text-gray-600 transition-colors font-medium">Calculator</a>
                    <a href="your-documents.html" id="nav-documents" class="text-black hover:text-gray-600 transition-colors font-medium" style="display: none;">Your Documents</a>
                    <!-- Admin link itself is visible because we are on the admin page.  updateNav() may hide it on other pages. -->
                    <a href="admin.html" id="nav-admin" class="text-black hover:text-gray-600 transition-colors font-medium">Admin</a>
                    <a href="login.html" id="nav-login" class="text-black hover:text-gray-600 transition-colors font-medium">Login</a>
                    <a href="#" id="nav-logout" class="text-black hover:text-gray-600 transition-colors font-medium" onclick="logout()">Logout</a>
                    <a href="index.html#start" class="bg-black text-white px-6 py-2 rounded-full text-sm font-semibold hover:bg-gray-800 transition-colors">Start Your Brand</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h1 class="text-4xl font-display font-bold mb-8">Admin Dashboard</h1>
        <!-- Hero content editor -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Edit Home Page Hero</h2>
            <p class="text-sm text-gray-600 mb-4">You can customise the hero heading and subtitle on the home page.  Use simple HTML (e.g. &lt;span class=&quot;text-gradient&quot;&gt;) to style parts of the heading.</p>
            <div class="mb-4">
                <label for="admin-hero-title" class="block text-sm font-medium text-gray-700 mb-1">Hero Title (HTML allowed)</label>
                <textarea id="admin-hero-title" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" rows="4"></textarea>
            </div>
            <div class="mb-4">
                <label for="admin-hero-subtitle" class="block text-sm font-medium text-gray-700 mb-1">Hero Subtitle</label>
                <input type="text" id="admin-hero-subtitle" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <button id="save-hero" class="bg-black text-white py-2 px-6 rounded-lg font-semibold hover:bg-gray-800">Save Hero Content</button>
            <p id="hero-save-msg" class="text-green-600 text-sm mt-3 hidden">Hero content saved.</p>
        </section>

        <!-- About page editor -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Edit About Page</h2>
            <p class="text-sm text-gray-600 mb-4">Customise the hero and first sections of the About page.  These values will replace the default headings and paragraphs when the page loads.</p>
            <div class="mb-4">
                <label for="admin-about-hero-title" class="block text-sm font-medium text-gray-700 mb-1">About Hero Title</label>
                <input id="admin-about-hero-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <div class="mb-4">
                <label for="admin-about-hero-subtitle" class="block text-sm font-medium text-gray-700 mb-1">About Hero Subtitle</label>
                <input id="admin-about-hero-subtitle" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <div class="mb-4">
                <label for="admin-about-story" class="block text-sm font-medium text-gray-700 mb-1">Our Story (one paragraph per line)</label>
                <textarea id="admin-about-story" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" rows="6"></textarea>
            </div>
            <div class="mb-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="admin-mission-title" class="block text-sm font-medium text-gray-700 mb-1">Mission Section Title</label>
                    <input id="admin-mission-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                    <label for="admin-mission-desc1" class="block text-sm font-medium text-gray-700 mb-1 mt-3">Mission Description Line 1</label>
                    <input id="admin-mission-desc1" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                    <label for="admin-mission-desc2" class="block text-sm font-medium text-gray-700 mb-1 mt-3">Mission Description Line 2</label>
                    <input id="admin-mission-desc2" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="admin-vision-title" class="block text-sm font-medium text-gray-700 mb-1">Vision Section Title</label>
                    <input id="admin-vision-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                    <label for="admin-vision-desc1" class="block text-sm font-medium text-gray-700 mb-1 mt-3">Vision Description Line 1</label>
                    <input id="admin-vision-desc1" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                    <label for="admin-vision-desc2" class="block text-sm font-medium text-gray-700 mb-1 mt-3">Vision Description Line 2</label>
                    <input id="admin-vision-desc2" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
            </div>
            <div class="mb-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="admin-team-title" class="block text-sm font-medium text-gray-700 mb-1">Team Section Title</label>
                    <input id="admin-team-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="admin-team-subtitle" class="block text-sm font-medium text-gray-700 mb-1">Team Section Subtitle</label>
                    <input id="admin-team-subtitle" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
            </div>
            <div class="mb-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="admin-impact-title" class="block text-sm font-medium text-gray-700 mb-1">Impact Section Title</label>
                    <input id="admin-impact-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="admin-impact-subtitle" class="block text-sm font-medium text-gray-700 mb-1">Impact Section Subtitle</label>
                    <input id="admin-impact-subtitle" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
            </div>
            <button id="save-about" class="bg-black text-white py-2 px-6 rounded-lg font-semibold hover:bg-gray-800">Save About Content</button>
            <p id="about-save-msg" class="text-green-600 text-sm mt-3 hidden">About page content saved.</p>
        </section>

        <!-- How It Works page editor -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Edit How It Works Page</h2>
            <p class="text-sm text-gray-600 mb-4">Modify the main headings on the How It Works page.  Steps themselves remain static.</p>
            <div class="mb-4">
                <label for="admin-how-title" class="block text-sm font-medium text-gray-700 mb-1">Live-Selling Section Title</label>
                <input id="admin-how-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <div class="mb-4">
                <label for="admin-how-subtitle" class="block text-sm font-medium text-gray-700 mb-1">Live-Selling Section Subtitle</label>
                <input id="admin-how-subtitle" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <div class="mb-4">
                <label for="admin-ready-title" class="block text-sm font-medium text-gray-700 mb-1">Ready Section Title</label>
                <input id="admin-ready-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <button id="save-how" class="bg-black text-white py-2 px-6 rounded-lg font-semibold hover:bg-gray-800">Save How It Works Content</button>
            <p id="how-save-msg" class="text-green-600 text-sm mt-3 hidden">How It Works page content saved.</p>
        </section>

        <!-- Success Stories page editor -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Edit Success Stories Page</h2>
            <p class="text-sm text-gray-600 mb-4">Adjust the hero heading and subtitle for the Success Stories page.</p>
            <div class="mb-4">
                <label for="admin-success-title" class="block text-sm font-medium text-gray-700 mb-1">Success Stories Title</label>
                <input id="admin-success-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <div class="mb-4">
                <label for="admin-success-subtitle" class="block text-sm font-medium text-gray-700 mb-1">Success Stories Subtitle</label>
                <input id="admin-success-subtitle" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <button id="save-success" class="bg-black text-white py-2 px-6 rounded-lg font-semibold hover:bg-gray-800">Save Success Content</button>
            <p id="success-save-msg" class="text-green-600 text-sm mt-3 hidden">Success Stories content saved.</p>
        </section>

        <!-- ROI Calculator assumptions editor -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Edit ROI Calculator Assumptions</h2>
            <p class="text-sm text-gray-600 mb-4">Configure the default assumptions used by the ROI calculator.  Percentages should be entered as numbers (e.g. enter <code>5</code> for 5%).</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="calc-followers-conv" class="block text-sm font-medium text-gray-700 mb-1">Followers â†’ Live Conversion (%)</label>
                    <input id="calc-followers-conv" type="number" step="0.1" min="0" max="100" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-live-purchase-conv" class="block text-sm font-medium text-gray-700 mb-1">Live â†’ Purchase Conversion (%)</label>
                    <input id="calc-live-purchase-conv" type="number" step="0.1" min="0" max="100" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-profit-margin" class="block text-sm font-medium text-gray-700 mb-1">Profit Margin / Commission (%)</label>
                    <input id="calc-profit-margin" type="number" step="0.1" min="0" max="100" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
            </div>
            <!-- AOV by niche -->
            <h3 class="text-lg font-semibold mt-6 mb-2">Average Order Value (AOV) by Niche</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="calc-aov-fashion" class="block text-sm font-medium text-gray-700 mb-1">Fashion AOV ($)</label>
                    <input id="calc-aov-fashion" type="number" step="1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-aov-streetwear" class="block text-sm font-medium text-gray-700 mb-1">Streetwear AOV ($)</label>
                    <input id="calc-aov-streetwear" type="number" step="1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-aov-luxury" class="block text-sm font-medium text-gray-700 mb-1">Luxury AOV ($)</label>
                    <input id="calc-aov-luxury" type="number" step="1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-aov-accessories" class="block text-sm font-medium text-gray-700 mb-1">Accessories AOV ($)</label>
                    <input id="calc-aov-accessories" type="number" step="1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
            </div>
            <!-- Collection multipliers -->
            <h3 class="text-lg font-semibold mt-6 mb-2">Collection Type Multipliers</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="calc-multiplier-basic" class="block text-sm font-medium text-gray-700 mb-1">Basic</label>
                    <input id="calc-multiplier-basic" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-multiplier-seasonal" class="block text-sm font-medium text-gray-700 mb-1">Seasonal</label>
                    <input id="calc-multiplier-seasonal" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-multiplier-limited" class="block text-sm font-medium text-gray-700 mb-1">Limited</label>
                    <input id="calc-multiplier-limited" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-multiplier-premium" class="block text-sm font-medium text-gray-700 mb-1">Premium</label>
                    <input id="calc-multiplier-premium" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
            </div>
            <!-- Niche engagement multipliers -->
            <h3 class="text-lg font-semibold mt-6 mb-2">Niche Engagement Multipliers</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="calc-niche-multiplier-fashion" class="block text-sm font-medium text-gray-700 mb-1">Fashion</label>
                    <input id="calc-niche-multiplier-fashion" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-niche-multiplier-streetwear" class="block text-sm font-medium text-gray-700 mb-1">Streetwear</label>
                    <input id="calc-niche-multiplier-streetwear" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-niche-multiplier-luxury" class="block text-sm font-medium text-gray-700 mb-1">Luxury</label>
                    <input id="calc-niche-multiplier-luxury" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
                <div>
                    <label for="calc-niche-multiplier-accessories" class="block text-sm font-medium text-gray-700 mb-1">Accessories</label>
                    <input id="calc-niche-multiplier-accessories" type="number" step="0.1" min="0" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>
            </div>
            <button id="save-calc" class="bg-black text-white py-2 px-6 rounded-lg font-semibold hover:bg-gray-800 mt-6">Save Calculator Settings</button>
            <p id="calc-save-msg" class="text-green-600 text-sm mt-3 hidden">Calculator settings saved.</p>
        </section>

        <!-- Blog management editor -->
        <section class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Manage Blog Posts</h2>
            <p class="text-sm text-gray-600 mb-4">Create new blog posts or edit existing ones.  Posts are stored locally and shown on the home page.</p>
            <!-- Blog post title -->
            <div class="mb-4">
                <label for="blog-title" class="block text-sm font-medium text-gray-700 mb-1">Post Title</label>
                <input id="blog-title" type="text" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
            </div>
            <!-- Blog post image upload -->
            <div class="mb-4">
                <label for="blog-image" class="block text-sm font-medium text-gray-700 mb-1">Featured Image</label>
                <!--
                  The admin can upload an image for each blog post.  The image is converted to a Base64 data URL and stored in localStorage alongside the post data.  When editing a post,
                  leaving this field blank will keep the previous image.
                -->
                <input id="blog-image" type="file" accept="image/*" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black" />
                <div id="blog-image-preview" class="mt-2"></div>
            </div>
            <!-- Blog post content -->
            <div class="mb-4">
                <label for="blog-content" class="block text-sm font-medium text-gray-700 mb-1">Content</label>
                <textarea id="blog-content" rows="6" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-black"></textarea>
            </div>
            <button id="blog-save" class="bg-black text-white py-2 px-6 rounded-lg font-semibold hover:bg-gray-800">Save Blog Post</button>
            <p id="blog-save-msg" class="text-green-600 text-sm mt-3 hidden">Blog post saved.</p>
            <hr class="my-6">
            <h3 class="text-xl font-semibold mb-2">Existing Posts</h3>
            <ul id="blog-posts-list" class="space-y-4"></ul>
        </section>

        <!-- Document manager -->
        <section>
            <h2 class="text-2xl font-semibold mb-4">Manage Shared Documents</h2>
            <p class="text-sm text-gray-600 mb-4">Upload files here to share them with approved influencers.  Files are stored in the browser and will persist across sessions on this device.  Each upload will appear below with a link and a delete button.</p>
            <input type="file" id="document-upload" multiple class="mb-4" />
            <ul id="admin-doc-list" class="space-y-2"></ul>
        </section>
    </div>

    <script>
    // Admin page script.  Only administrators should access this page; redirect others.
    document.addEventListener('DOMContentLoaded', function() {
        // Verify admin credentials.  If not, send to admin login.
        if (!isAdmin()) {
            window.location.href = 'admin-login.html';
            return;
        }
        // Ensure loggedIn flag is set so nav shows appropriate options
        updateNav();
        // Populate hero fields for home page
        const heroTitleField = document.getElementById('admin-hero-title');
        const heroSubtitleField = document.getElementById('admin-hero-subtitle');
        const defaultHeroTitle = '<span class="text-gradient">Turn Your</span><br><span class="text-black">Influence</span><br><span class="text-gradient">Into Fashion</span>';
        const defaultHeroSubtitle = 'We handle everything from design to delivery so you can focus on your story. The only platform that transforms influencers into fashion brand owners.';
        heroTitleField.value = localStorage.getItem('heroTitle') || defaultHeroTitle;
        heroSubtitleField.value = localStorage.getItem('heroSubtitle') || defaultHeroSubtitle;
        document.getElementById('save-hero').addEventListener('click', function() {
            localStorage.setItem('heroTitle', heroTitleField.value);
            localStorage.setItem('heroSubtitle', heroSubtitleField.value);
            const msg = document.getElementById('hero-save-msg');
            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 2000);
        });

        // Populate About page fields
        const aboutHeroTitleField = document.getElementById('admin-about-hero-title');
        const aboutHeroSubtitleField = document.getElementById('admin-about-hero-subtitle');
        const aboutStoryField = document.getElementById('admin-about-story');
        const missionTitleField = document.getElementById('admin-mission-title');
        const missionDesc1Field = document.getElementById('admin-mission-desc1');
        const missionDesc2Field = document.getElementById('admin-mission-desc2');
        const visionTitleField = document.getElementById('admin-vision-title');
        const visionDesc1Field = document.getElementById('admin-vision-desc1');
        const visionDesc2Field = document.getElementById('admin-vision-desc2');
        const teamTitleField = document.getElementById('admin-team-title');
        const teamSubtitleField = document.getElementById('admin-team-subtitle');
        const impactTitleField = document.getElementById('admin-impact-title');
        const impactSubtitleField = document.getElementById('admin-impact-subtitle');
        // Set defaults based on current hard-coded content
        aboutHeroTitleField.value = localStorage.getItem('aboutHeroTitle') || 'About Idol Brands';
        aboutHeroSubtitleField.value = localStorage.getItem('aboutHeroSubtitle') || 'Built by fashion industry veterans. Designed for the new generation of influence-driven brands.';
        // Our Story paragraphs stored as newline separated string
        const defaultAboutStory = [
            'Idol Brands was founded in 2024 by a team of fashion industry veterans who watched countless influencers struggle to launch their own fashion brands. We saw the same story repeat itself: passionate creators with amazing ideas who failed because they couldn\'t handle the operational complexity.',
            'After decades in fashion manufacturing, logistics, and retail, we realized that the traditional fashion industry model was broken for the new generation of influence-driven brands. Influencers needed a different approach - one that let them focus on creativity and community while experts handled the operations.',
            'We combined our deep fashion industry expertise with cutting-edge live-commerce technology to create the first platform specifically designed for influencer fashion brands. Today, Idol Brands is more than just a service - we\'re a movement to democratize fashion entrepreneurship.'
        ].join('\n\n');
        aboutStoryField.value = localStorage.getItem('aboutStory') || defaultAboutStory;
        missionTitleField.value = localStorage.getItem('missionTitle') || 'Our Mission';
        missionDesc1Field.value = localStorage.getItem('missionDesc1') || 'To democratize fashion entrepreneurship by providing influencers with the tools, expertise, and platform they need to build successful fashion brands.';
        missionDesc2Field.value = localStorage.getItem('missionDesc2') || 'We believe that every influencer with a passionate community deserves the opportunity to turn their influence into a thriving business, without being held back by operational complexity.';
        visionTitleField.value = localStorage.getItem('visionTitle') || 'Our Vision';
        visionDesc1Field.value = localStorage.getItem('visionDesc1') || 'To become the world\'s leading live-selling marketplace for influencer fashion brands, where creativity meets commerce in real-time.';
        visionDesc2Field.value = localStorage.getItem('visionDesc2') || 'We\'re building a future where fashion brands are born from authentic communities, not boardrooms - where influence drives innovation and passion creates profit.';
        teamTitleField.value = localStorage.getItem('teamTitle') || 'Fashion Industry Veterans';
        teamSubtitleField.value = localStorage.getItem('teamSubtitle') || 'Our team combines decades of experience in fashion manufacturing, logistics, retail, and technology to support your brand\'s success.';
        impactTitleField.value = localStorage.getItem('impactTitle') || 'Our Impact';
        impactSubtitleField.value = localStorage.getItem('impactSubtitle') || 'Real results from real influencers who\'ve transformed their passion into profitable fashion brands.';
        document.getElementById('save-about').addEventListener('click', function() {
            localStorage.setItem('aboutHeroTitle', aboutHeroTitleField.value);
            localStorage.setItem('aboutHeroSubtitle', aboutHeroSubtitleField.value);
            localStorage.setItem('aboutStory', aboutStoryField.value);
            localStorage.setItem('missionTitle', missionTitleField.value);
            localStorage.setItem('missionDesc1', missionDesc1Field.value);
            localStorage.setItem('missionDesc2', missionDesc2Field.value);
            localStorage.setItem('visionTitle', visionTitleField.value);
            localStorage.setItem('visionDesc1', visionDesc1Field.value);
            localStorage.setItem('visionDesc2', visionDesc2Field.value);
            localStorage.setItem('teamTitle', teamTitleField.value);
            localStorage.setItem('teamSubtitle', teamSubtitleField.value);
            localStorage.setItem('impactTitle', impactTitleField.value);
            localStorage.setItem('impactSubtitle', impactSubtitleField.value);
            const msg = document.getElementById('about-save-msg');
            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 2000);
        });

        // Populate How It Works page fields
        const howTitleField = document.getElementById('admin-how-title');
        const howSubtitleField = document.getElementById('admin-how-subtitle');
        const readyTitleField = document.getElementById('admin-ready-title');
        howTitleField.value = localStorage.getItem('howTitle') || 'Experience Live-Selling';
        howSubtitleField.value = localStorage.getItem('howSubtitle') || 'See how our live-selling platform transforms your fashion shows into sales events.';
        readyTitleField.value = localStorage.getItem('readyTitle') || 'Ready to Start Live-Selling?';
        document.getElementById('save-how').addEventListener('click', function() {
            localStorage.setItem('howTitle', howTitleField.value);
            localStorage.setItem('howSubtitle', howSubtitleField.value);
            localStorage.setItem('readyTitle', readyTitleField.value);
            const msg = document.getElementById('how-save-msg');
            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 2000);
        });

        // Populate Success Stories page fields
        const successTitleField = document.getElementById('admin-success-title');
        const successSubtitleField = document.getElementById('admin-success-subtitle');
        successTitleField.value = localStorage.getItem('successTitle') || 'Success Stories';
        successSubtitleField.value = localStorage.getItem('successSubtitle') || 'Real influencers, real results. See how we\'ve transformed their influence into thriving fashion brands with our proven system.';
        document.getElementById('save-success').addEventListener('click', function() {
            localStorage.setItem('successTitle', successTitleField.value);
            localStorage.setItem('successSubtitle', successSubtitleField.value);
            const msg = document.getElementById('success-save-msg');
            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 2000);
        });

        // ===== ROI Calculator assumptions =====
        // Get references to calculator inputs
        const followersConvField = document.getElementById('calc-followers-conv');
        const livePurchaseConvField = document.getElementById('calc-live-purchase-conv');
        const profitMarginField = document.getElementById('calc-profit-margin');
        const aovFashionField = document.getElementById('calc-aov-fashion');
        const aovStreetwearField = document.getElementById('calc-aov-streetwear');
        const aovLuxuryField = document.getElementById('calc-aov-luxury');
        const aovAccessoriesField = document.getElementById('calc-aov-accessories');
        const multiBasicField = document.getElementById('calc-multiplier-basic');
        const multiSeasonalField = document.getElementById('calc-multiplier-seasonal');
        const multiLimitedField = document.getElementById('calc-multiplier-limited');
        const multiPremiumField = document.getElementById('calc-multiplier-premium');
        const nicheMultiFashionField = document.getElementById('calc-niche-multiplier-fashion');
        const nicheMultiStreetwearField = document.getElementById('calc-niche-multiplier-streetwear');
        const nicheMultiLuxuryField = document.getElementById('calc-niche-multiplier-luxury');
        const nicheMultiAccessoriesField = document.getElementById('calc-niche-multiplier-accessories');
        // Set defaults from localStorage or fallback values (convert decimals to percentages for display)
        const storedFollowersConv = parseFloat(localStorage.getItem('followersToLiveConversion'));
        followersConvField.value = isNaN(storedFollowersConv) ? 5 : (storedFollowersConv * 100);
        const storedLiveConv = parseFloat(localStorage.getItem('liveToPurchaseConversion'));
        livePurchaseConvField.value = isNaN(storedLiveConv) ? 15 : (storedLiveConv * 100);
        const storedProfit = parseFloat(localStorage.getItem('profitMargin'));
        profitMarginField.value = isNaN(storedProfit) ? 20 : (storedProfit * 100);
        // AOV by niche
        let storedNicheAOV;
        try {
            storedNicheAOV = JSON.parse(localStorage.getItem('nicheAOV'));
        } catch (e) {
            storedNicheAOV = null;
        }
        aovFashionField.value = storedNicheAOV && storedNicheAOV.fashion ? storedNicheAOV.fashion : 100;
        aovStreetwearField.value = storedNicheAOV && storedNicheAOV.streetwear ? storedNicheAOV.streetwear : 120;
        aovLuxuryField.value = storedNicheAOV && storedNicheAOV.luxury ? storedNicheAOV.luxury : 250;
        aovAccessoriesField.value = storedNicheAOV && storedNicheAOV.accessories ? storedNicheAOV.accessories : 80;
        // Collection multipliers
        let storedCollectionMult;
        try {
            storedCollectionMult = JSON.parse(localStorage.getItem('collectionMultipliers'));
        } catch (e) {
            storedCollectionMult = null;
        }
        multiBasicField.value = storedCollectionMult && storedCollectionMult.basic ? storedCollectionMult.basic : 1.0;
        multiSeasonalField.value = storedCollectionMult && storedCollectionMult.seasonal ? storedCollectionMult.seasonal : 1.2;
        multiLimitedField.value = storedCollectionMult && storedCollectionMult.limited ? storedCollectionMult.limited : 1.5;
        multiPremiumField.value = storedCollectionMult && storedCollectionMult.premium ? storedCollectionMult.premium : 1.8;
        // Niche multipliers
        let storedNicheMult;
        try {
            storedNicheMult = JSON.parse(localStorage.getItem('nicheMultipliers'));
        } catch (e) {
            storedNicheMult = null;
        }
        nicheMultiFashionField.value = storedNicheMult && storedNicheMult.fashion ? storedNicheMult.fashion : 1.0;
        nicheMultiStreetwearField.value = storedNicheMult && storedNicheMult.streetwear ? storedNicheMult.streetwear : 1.1;
        nicheMultiLuxuryField.value = storedNicheMult && storedNicheMult.luxury ? storedNicheMult.luxury : 0.8;
        nicheMultiAccessoriesField.value = storedNicheMult && storedNicheMult.accessories ? storedNicheMult.accessories : 1.3;
        // Save handler
        document.getElementById('save-calc').addEventListener('click', function() {
            // Parse percentages into decimals
            const followersConvDec = parseFloat(followersConvField.value) / 100;
            const liveConvDec = parseFloat(livePurchaseConvField.value) / 100;
            const profitMarginDec = parseFloat(profitMarginField.value) / 100;
            if (!isNaN(followersConvDec)) localStorage.setItem('followersToLiveConversion', followersConvDec);
            if (!isNaN(liveConvDec)) localStorage.setItem('liveToPurchaseConversion', liveConvDec);
            if (!isNaN(profitMarginDec)) localStorage.setItem('profitMargin', profitMarginDec);
            // Compose objects for AOV and multipliers
            const aovObj = {
                fashion: parseFloat(aovFashionField.value) || 100,
                streetwear: parseFloat(aovStreetwearField.value) || 120,
                luxury: parseFloat(aovLuxuryField.value) || 250,
                accessories: parseFloat(aovAccessoriesField.value) || 80
            };
            localStorage.setItem('nicheAOV', JSON.stringify(aovObj));
            const collectionObj = {
                basic: parseFloat(multiBasicField.value) || 1.0,
                seasonal: parseFloat(multiSeasonalField.value) || 1.2,
                limited: parseFloat(multiLimitedField.value) || 1.5,
                premium: parseFloat(multiPremiumField.value) || 1.8
            };
            localStorage.setItem('collectionMultipliers', JSON.stringify(collectionObj));
            const nicheObj = {
                fashion: parseFloat(nicheMultiFashionField.value) || 1.0,
                streetwear: parseFloat(nicheMultiStreetwearField.value) || 1.1,
                luxury: parseFloat(nicheMultiLuxuryField.value) || 0.8,
                accessories: parseFloat(nicheMultiAccessoriesField.value) || 1.3
            };
            localStorage.setItem('nicheMultipliers', JSON.stringify(nicheObj));
            const msg = document.getElementById('calc-save-msg');
            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 2000);
        });

        // ===== Blog management =====
        let editingPostIndex = -1;
        const blogTitleField = document.getElementById('blog-title');
        const blogContentField = document.getElementById('blog-content');
        const blogImageField = document.getElementById('blog-image');
        const blogImagePreview = document.getElementById('blog-image-preview');
        const blogListElem = document.getElementById('blog-posts-list');
        const blogSaveBtn = document.getElementById('blog-save');

        // When the admin selects an image file, display a preview of the uploaded image
        blogImageField.addEventListener('change', function() {
            blogImagePreview.innerHTML = '';
            const file = this.files && this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.alt = 'Preview';
                    img.className = 'w-full mb-2 rounded';
                    blogImagePreview.appendChild(img);
                };
                reader.readAsDataURL(file);
            }
        });

        function loadBlogPosts() {
            let posts = [];
            try {
                const stored = localStorage.getItem('blogPosts');
                if (stored) posts = JSON.parse(stored);
            } catch (e) {
                posts = [];
            }
            blogListElem.innerHTML = '';
            if (!posts || posts.length === 0) {
                const li = document.createElement('li');
                li.className = 'text-gray-500';
                li.textContent = 'No posts yet.';
                blogListElem.appendChild(li);
                return;
            }
            posts.forEach(function(post, index) {
                const li = document.createElement('li');
                li.className = 'bg-white p-4 rounded-lg shadow';
                const title = document.createElement('h4');
                title.className = 'font-semibold text-black';
                title.textContent = post.title || 'Untitled';
                const date = document.createElement('p');
                date.className = 'text-xs text-gray-500 mb-2';
                date.textContent = post.date || '';
                // Optionally display a small thumbnail in the admin list
                if (post.img) {
                    const thumb = document.createElement('img');
                    thumb.src = post.img;
                    thumb.alt = post.title || '';
                    thumb.className = 'w-full mb-2 rounded';
                    li.appendChild(thumb);
                }
                const actions = document.createElement('div');
                actions.className = 'mt-2';
                const editBtn = document.createElement('button');
                editBtn.textContent = 'Edit';
                editBtn.className = 'text-blue-600 hover:underline mr-4 text-sm';
                editBtn.addEventListener('click', function() {
                    editingPostIndex = index;
                    blogTitleField.value = post.title;
                    blogContentField.value = post.content;
                    // Set preview and clear file input when editing.  We don't prefill the file input due to browser restrictions.
                    if (post.img) {
                        blogImagePreview.innerHTML = '';
                        const img = document.createElement('img');
                        img.src = post.img;
                        img.alt = post.title || '';
                        img.className = 'w-full mb-2 rounded';
                        blogImagePreview.appendChild(img);
                    }
                    blogSaveBtn.textContent = 'Update Blog Post';
                });
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = 'Delete';
                deleteBtn.className = 'text-red-600 hover:underline text-sm';
                deleteBtn.addEventListener('click', function() {
                    posts.splice(index, 1);
                    localStorage.setItem('blogPosts', JSON.stringify(posts));
                    editingPostIndex = -1;
                    blogTitleField.value = '';
                    blogContentField.value = '';
                    blogImageField.value = '';
                    blogImagePreview.innerHTML = '';
                    blogSaveBtn.textContent = 'Save Blog Post';
                    loadBlogPosts();
                });
                actions.appendChild(editBtn);
                actions.appendChild(deleteBtn);
                li.appendChild(title);
                li.appendChild(date);
                li.appendChild(actions);
                blogListElem.appendChild(li);
            });
        }

        // Initial load of blog posts
        loadBlogPosts();

        blogSaveBtn.addEventListener('click', function() {
            // Retrieve existing posts from storage
            let posts = [];
            try {
                const stored = localStorage.getItem('blogPosts');
                if (stored) posts = JSON.parse(stored);
            } catch (e) {
                posts = [];
            }
            const title = blogTitleField.value.trim();
            const content = blogContentField.value.trim();
            if (!title || !content) return; // require both fields
            const now = new Date();
            const dateStr = now.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' });
            // Helper to finalize saving after image reading completes
            function finalizeSave(imgDataUrl) {
                if (editingPostIndex >= 0 && editingPostIndex < posts.length) {
                    // update existing post, preserving old image if new one not provided
                    const existing = posts[editingPostIndex] || {};
                    posts[editingPostIndex] = {
                        title: title,
                        content: content,
                        date: dateStr,
                        img: imgDataUrl || existing.img || null
                    };
                    editingPostIndex = -1;
                    blogSaveBtn.textContent = 'Save Blog Post';
                } else {
                    posts.push({
                        title: title,
                        content: content,
                        date: dateStr,
                        img: imgDataUrl || null
                    });
                }
                localStorage.setItem('blogPosts', JSON.stringify(posts));
                blogTitleField.value = '';
                blogContentField.value = '';
                blogImageField.value = '';
                blogImagePreview.innerHTML = '';
                const msg = document.getElementById('blog-save-msg');
                msg.classList.remove('hidden');
                setTimeout(() => msg.classList.add('hidden'), 2000);
                loadBlogPosts();
            }
            // If a new image file is selected, read it; otherwise save immediately
            const file = blogImageField.files && blogImageField.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imgDataUrl = e.target.result;
                    finalizeSave(imgDataUrl);
                };
                reader.onerror = function() {
                    // If reading fails, proceed without image
                    finalizeSave(null);
                };
                reader.readAsDataURL(file);
            } else {
                finalizeSave(null);
            }
        });
        // Document management
        function loadAdminDocs() {
            let docs = [];
            try {
                const stored = localStorage.getItem('documents');
                if (stored) docs = JSON.parse(stored);
            } catch (e) {
                console.error('Could not parse documents', e);
            }
            const list = document.getElementById('admin-doc-list');
            list.innerHTML = '';
            if (docs && docs.length > 0) {
                docs.forEach(function(doc, index) {
                    const li = document.createElement('li');
                    li.className = 'bg-white p-4 rounded-lg shadow flex justify-between items-center';
                    const link = document.createElement('a');
                    link.href = doc.data;
                    link.textContent = doc.name;
                    link.setAttribute('download', doc.name);
                    link.className = 'text-blue-600 hover:underline';
                    li.appendChild(link);
                    const del = document.createElement('button');
                    del.textContent = 'Delete';
                    del.className = 'text-red-600 hover:underline ml-4 text-sm';
                    del.addEventListener('click', function() {
                        docs.splice(index, 1);
                        localStorage.setItem('documents', JSON.stringify(docs));
                        loadAdminDocs();
                    });
                    li.appendChild(del);
                    list.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.className = 'text-gray-500';
                li.textContent = 'No documents uploaded yet.';
                list.appendChild(li);
            }
        }
        // File upload handler
        document.getElementById('document-upload').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            if (!files.length) return;
            let docs = [];
            try {
                const stored = localStorage.getItem('documents');
                if (stored) docs = JSON.parse(stored);
            } catch (e) {
                docs = [];
            }
            // Process each file asynchronously
            files.forEach(function(file) {
                const reader = new FileReader();
                reader.onload = function(evt) {
                    docs.push({ name: file.name, data: evt.target.result });
                    localStorage.setItem('documents', JSON.stringify(docs));
                    loadAdminDocs();
                };
                reader.readAsDataURL(file);
            });
            // Reset the input value so the same file can be uploaded again if desired
            e.target.value = '';
        });
        // Initial render
        loadAdminDocs();
    });
    </script>
</body>
</html>